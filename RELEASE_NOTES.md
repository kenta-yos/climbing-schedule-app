# 🧗 Go Bouldering — アップデートノート

> 大規模リニューアルを行いました！
> アプリをホーム画面に追加している方は、一度削除して再インストールすると最新版になります。

---

## ⚡ まず一番大事なこと：めちゃくちゃ速くなった

ページ移動のたびにログイン画面に戻されたり、読み込みでフリーズする問題を根本から修正しました。
タブを切り替えてもスムーズに動くようになっています。
ローディング中はスピナーが表示されるので、「押せてるのかわからない」ストレスもなくなりました。

---

## 🏠 トップページ

### 予定登録でジムをキーワード検索できるようになった
ジムを一覧から探す必要はなくなりました。「田町」「錦糸町」などキーワードを入力するだけで、すぐに候補が絞り込まれます。

### ジム未定で予定を登録できるようになった
「登りに行きたいけどジムはまだ決まってない…」という日に使ってください。
予定登録フォームで **「ジム未定」** を選択して登録できます。あとからジムが決まったら編集すればOKです。

### みんなの予定一覧から予定を後から編集・削除できるようになった
自分が登録した予定は、トップの一覧から直接 **「ジムを変更」「削除」** できるようになりました。
ジムが変わっても、その場で修正できます。

### みんなの予定に「参加する」ボタンが追加された
友達の予定を見て「この日おれも行ける！」と思ったら、その場でワンタップで参加登録できます。
同じ日・同じジムへの二重登録は自動でブロックされます。

### 今日・明日の予定がわかりやすくなった
今日と明日の予定カードは色が変わって、ひと目でわかるようになりました。

### 30秒ごとに自動でデータ更新
ページを開いたまま放置していても、みんなの予定が自動で更新されます。
プルダウンで手動更新もできます。

---

## 🏆 ログページ（CLIM-BAKA AWARD）

### ランキングのユーザー名をタップすると詳細が見られるようになった
「あいつ今月どこに登ってんの？」が確認できます。
ランキングに表示されているユーザー名をタップすると、今月登ったジムの一覧がその場で展開されます。

### グラフのジム数が多い場合もきちんと表示されるようになった
「もっと見る」でグラフを追加表示できます。ジム名が長くても折り返して表示されます。

---

## 🏢 ジムページ（大幅リニューアル）

ジム一覧を完全に作り直しました。「どのジムに行こうか迷う」を解決するためのページです。

### 出発地から近い順に表示
ページを開くと現在地を自動取得して、近い順にジムを並べます。
住所や駅名を入力して出発地を変えることもできます（候補がサジェストで出るので選ぶだけ）。

### 3つの並び替えモード
| モード | 内容 |
|--------|------|
| 📍 近い順 | 出発地から近いジムが上に来る |
| 🔥 新セット順 | セット替えが新しいジムが上に来る。新セット（7日以内）はオレンジ、準新セット（14日以内）は黄色のバッジがつく |
| ⌛ ご無沙汰順 | 最後に登った日が古いジムが上に来る。30日以上行ってないと赤色で表示 |

### カードで情報を一目で確認
各ジムのカードに以下の情報がまとまっています：
- **セット替え日**と何日目か
- **最終登攀日**（最後に自分が登った日）
- **🆕 未訪問**バッジ（まだ一度も行ったことないジム）
- **👥 仲間バッジ**（その日に行く予定の仲間のアイコンと時間帯）
- **インスタへのリンク**（ジムのSNSを確認できる）
- **距離表示**

### 登る日を変えて確認できる
日付を変更すると「その日に行く仲間」が変わります。週末の予定確認に使ってください。

### デフォルトは東京・神奈川
最初は都内・神奈川のジムだけ表示されます。「全国のジムを表示する」にチェックすると全件表示になります。

---

## ⚙️ 管理ページ（管理者向け）

- セット登録のジム選択を **検索式** に変更（ジム名を入力して絞り込む）
- 登録後に「登録済みスケジュール確認」で先月・今月・来月のデータを確認できる
- ジム登録に住所入力を追加。入力中にサジェストが出る（GPS位置情報があれば近い順に表示）
- 登録済みジム一覧で確認できる（位置情報の登録有無も表示）
- 1年以上前のセットスケジュールデータを自動削除

---

## その他の改善

- **アプリ名** を「Go Bouldering」に変更
- **ナビゲーション** を4タブに整理（トップ・ログ・ジム・管理）
- **ダッシュボードの統計カード** を2列パネル表示に改善（セッション数・ジム数）
- **PWA対応** を強化（ノッチ・Dynamic Island・ホームバー対応）
- **日時計算** を日本時間(JST)に統一

---

*何かバグや要望があればすぐ言ってください 🙏*
